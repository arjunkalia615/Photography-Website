<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - ifeelworld</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">ifeelworld</a>
            <ul class="nav-links" id="navLinks">
                <li><a href="index.html">Home</a></li>
                <li><a href="gallery.html">Gallery</a></li>
                <li><a href="traditional-arts.html">Traditional Arts</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html" class="active">Contact</a></li>
            </ul>
            <button class="mobile-menu-toggle" id="mobileMenuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Cart Dropdown -->
    <div class="cart-dropdown" id="cartDropdown">
        <div class="cart-header">
            <h3>Shopping Cart</h3>
            <button class="cart-close" id="cartClose">&times;</button>
        </div>
        <div class="cart-items" id="cartItems"></div>
        <div class="cart-footer">
            <div class="cart-total">
                <span class="cart-total-label">Total:</span>
                <span class="cart-total-price" id="cartTotal">$0.00</span>
            </div>
            <button class="cart-checkout-btn" id="cartCheckout">Checkout</button>
        </div>
    </div>

    <!-- Page Content -->
    <div class="page-content">
        <div class="container">
            <h1 class="page-title">Contact Us</h1>
            <div class="contact-content">
                <div class="contact-intro">
                    <p>We'd love to hear from you! Whether you have questions about our photography, need assistance with an order, or want to discuss licensing opportunities, please don't hesitate to reach out.</p>
                </div>

                <div class="contact-form-wrapper">
                    <form class="contact-form" id="contactForm" action="https://formsubmit.co/hello@ifeelworld.com" method="POST">
                        <!-- Honeypot field for spam protection (hidden from users) -->
                        <input type="text" name="_honey" style="display: none; position: absolute; left: -9999px;" tabindex="-1" autocomplete="off">
                        
                        <!-- Formsubmit configuration -->
                        <input type="hidden" name="_subject" value="New Contact Form Submission from ifeelworld.com">
                        <input type="hidden" name="_captcha" value="false">
                        <input type="hidden" name="_template" value="box">
                        <input type="hidden" name="_next" value="" id="_next">
                        <input type="hidden" name="_autoresponse" value="Thank you for contacting ifeelworld! We have received your message and will get back to you within 24-48 hours.">
                        
                        <div class="form-group">
                            <label for="contactName">Name *</label>
                            <input type="text" id="contactName" name="name" required placeholder="Your name" minlength="2" maxlength="100">
                            <span class="form-error" id="nameError"></span>
                        </div>

                        <div class="form-group">
                            <label for="contactEmail">Email *</label>
                            <input type="email" id="contactEmail" name="email" required placeholder="your.email@example.com" maxlength="255">
                            <span class="form-error" id="emailError"></span>
                        </div>

                        <div class="form-group">
                            <label for="contactSubject">Subject *</label>
                            <select id="contactSubject" name="subject" required>
                                <option value="">Select a subject</option>
                                <option value="General Inquiry">General Inquiry</option>
                                <option value="Order Question">Order Question</option>
                                <option value="Refund Request">Refund Request</option>
                                <option value="Licensing Inquiry">Licensing Inquiry</option>
                                <option value="Technical Support">Technical Support</option>
                                <option value="Other">Other</option>
                            </select>
                            <span class="form-error" id="subjectError"></span>
                        </div>

                        <div class="form-group">
                            <label for="contactMessage">Message *</label>
                            <textarea id="contactMessage" name="message" rows="6" required placeholder="Please provide details about your inquiry..." minlength="10" maxlength="2000"></textarea>
                            <span class="form-error" id="messageError"></span>
                        </div>

                        <!-- Success/Error Messages -->
                        <div class="form-message" id="formMessage" style="display: none;"></div>

                        <button type="submit" class="contact-submit-btn" id="submitBtn">
                            <span class="btn-text">Send Message</span>
                            <span class="btn-loader" style="display: none;">Sending...</span>
                        </button>
                    </form>

                    <div class="contact-info">
                        <p>For immediate assistance, you can also reach us through:</p>
                        <ul>
                            <li><strong>Instagram:</strong> <a href="https://www.instagram.com/zenvision.gallery/" target="_blank" rel="noopener noreferrer">@zenvision.gallery</a></li>
                        </ul>
                        <p class="contact-note">We typically respond within 24-48 hours during business days.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="terms-and-conditions.html">Terms & Conditions</a>
                <a href="privacy-policy.html">Privacy Policy</a>
                <a href="refund-policy.html">Refund Policy</a>
                <a href="disclaimer.html">Disclaimer</a>
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
            </div>
            <p class="footer-text">&copy; 2025 ifeelworld â€“ All rights reserved</p>
            <a href="https://www.instagram.com/zenvision.gallery/" target="_blank" rel="noopener noreferrer" class="instagram-link">
                <svg class="instagram-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.204-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                </svg>
                <span>zenvision.gallery</span>
            </a>
        </div>
    </footer>

    <script src="cart.js"></script>
    <script src="blur-up.js"></script>
    <script>
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const navLinks = document.getElementById('navLinks');
        const navContainer = document.querySelector('.nav-container');

        mobileMenuToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            navLinks.classList.toggle('active');
        });

        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
            });
        });

        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
            if (navLinks && navLinks.classList.contains('active')) {
                const isClickInsideNav = navContainer && navContainer.contains(e.target);
                if (!isClickInsideNav) {
                    navLinks.classList.remove('active');
                }
            }
        });

        const cartClose = document.getElementById('cartClose');
        const cartDropdown = document.getElementById('cartDropdown');
        if (cartClose && cartDropdown) {
            cartClose.addEventListener('click', () => {
                cartDropdown.classList.remove('active');
            });
        }

        // Contact Form Handler
        const contactForm = document.getElementById('contactForm');
        const submitBtn = document.getElementById('submitBtn');
        const btnText = submitBtn.querySelector('.btn-text');
        const btnLoader = submitBtn.querySelector('.btn-loader');
        const formMessage = document.getElementById('formMessage');
        
        // Clear all error messages
        function clearErrors() {
            document.querySelectorAll('.form-error').forEach(error => {
                error.textContent = '';
                error.style.display = 'none';
            });
            formMessage.style.display = 'none';
            formMessage.className = 'form-message';
        }

        // Show error message
        function showError(fieldId, message) {
            const errorEl = document.getElementById(fieldId + 'Error');
            if (errorEl) {
                errorEl.textContent = message;
                errorEl.style.display = 'block';
            }
        }

        // Show form message (success or error)
        function showFormMessage(message, isSuccess = true) {
            formMessage.textContent = message;
            formMessage.className = isSuccess ? 'form-message form-message-success' : 'form-message form-message-error';
            formMessage.style.display = 'block';
            
            // Scroll to message
            formMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Validate form
        function validateForm() {
            clearErrors();
            let isValid = true;

            const name = document.getElementById('contactName').value.trim();
            const email = document.getElementById('contactEmail').value.trim();
            const subject = document.getElementById('contactSubject').value;
            const message = document.getElementById('contactMessage').value.trim();

            // Validate name
            if (name.length < 2) {
                showError('name', 'Name must be at least 2 characters');
                isValid = false;
            }

            // Validate email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showError('email', 'Please enter a valid email address');
                isValid = false;
            }

            // Validate subject
            if (!subject) {
                showError('subject', 'Please select a subject');
                isValid = false;
            }

            // Validate message
            if (message.length < 10) {
                showError('message', 'Message must be at least 10 characters');
                isValid = false;
            }

            return isValid;
        }

        if (contactForm) {
            contactForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                // Clear previous messages
                clearErrors();

                // Validate form
                if (!validateForm()) {
                    showFormMessage('Please correct the errors above.', false);
                    return;
                }

                // Set redirect URL to prevent page redirect (stay on same page)
                const currentUrl = window.location.href.split('#')[0];
                document.getElementById('_next').value = currentUrl;

                // Disable submit button and show loading state
                submitBtn.disabled = true;
                btnText.style.display = 'none';
                btnLoader.style.display = 'inline';

                try {
                    // Submit form to Formsubmit
                    const formData = new FormData(contactForm);
                    
                    // Format message for better email readability
                    const subject = document.getElementById('contactSubject').value;
                    const message = document.getElementById('contactMessage').value.trim();
                    const name = document.getElementById('contactName').value.trim();
                    const email = document.getElementById('contactEmail').value.trim();
                    
                    // Create formatted message body for email
                    const formattedMessage = `Subject: ${subject}\n\nFrom: ${name} (${email})\n\nMessage:\n${message}`;
                    
                    // Update message field temporarily for submission
                    const messageField = document.getElementById('contactMessage');
                    const originalMessage = messageField.value;
                    messageField.value = formattedMessage;
                    
                    // Create new FormData with formatted message
                    const submissionData = new FormData(contactForm);
                    
                    const response = await fetch(contactForm.action, {
                        method: 'POST',
                        body: submissionData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    });

                    // Restore original message immediately
                    messageField.value = originalMessage;

                    // Formsubmit returns 200 on success, or redirects
                    // If we get here without error, assume success
                    if (response.ok || response.status === 200 || response.status === 0) {
                        // Success
                        showFormMessage('Thank you! Your message has been sent successfully. We\'ll get back to you soon.', true);
                        contactForm.reset();
                        
                        // Reset button after delay
                        setTimeout(() => {
                            submitBtn.disabled = false;
                            btnText.style.display = 'inline';
                            btnLoader.style.display = 'none';
                        }, 2000);
                    } else {
                        // Try to parse error response
                        try {
                            const data = await response.json();
                            if (data.error) {
                                showFormMessage('There was an error: ' + data.error + '. Please try again.', false);
                            } else {
                                showFormMessage('There was an error sending your message. Please try again later.', false);
                            }
                        } catch (parseError) {
                            // If response is not JSON, check status
                            if (response.status === 429) {
                                showFormMessage('Too many requests. Please wait a moment and try again.', false);
                            } else {
                                // Even if we can't read the response, Formsubmit might still process it
                                showFormMessage('Your message is being sent. If you don\'t receive a confirmation, please try again.', true);
                                contactForm.reset();
                            }
                        }
                        
                        submitBtn.disabled = false;
                        btnText.style.display = 'inline';
                        btnLoader.style.display = 'none';
                    }
                } catch (error) {
                    // Network or CORS error (Formsubmit may use CORS)
                    // In this case, the form might still submit successfully
                    // Formsubmit will handle the submission and redirect
                    console.log('Form submission initiated (response may be blocked by CORS, but form should still submit)');
                    
                    // Show success message optimistically
                    // Formsubmit will process the form even if we can't read the response
                    showFormMessage('Thank you! Your message has been sent successfully. We\'ll get back to you soon.', true);
                    contactForm.reset();
                    
                    setTimeout(() => {
                        submitBtn.disabled = false;
                        btnText.style.display = 'inline';
                        btnLoader.style.display = 'none';
                    }, 2000);
                }
            });

            // Real-time validation on blur
            const formFields = ['contactName', 'contactEmail', 'contactSubject', 'contactMessage'];
            formFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('blur', () => {
                        if (field.value.trim()) {
                            validateForm();
                        }
                    });
                }
            });
        }
    </script>
</body>
</html>
